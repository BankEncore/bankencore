<section id="<%= dom_id(party, :phones_section) %>" class="space-y-2">
  <div class="flex items-center justify-between">
    <h3 class="font-semibold">Phones</h3>
      <%= link_to "Add",
        new_party_party_phone_path(party.public_id, from: :show),
        data: { turbo_frame: "comm_modal_frame", action: "click->modal#open" },
        class: "btn btn-secondary btn-soft btn-xs" %>
  </div>

  <ul class="menu menu-sm bg-base-100 rounded-box w-full">
    <% party.phones.each do |phone| %>
      <li class="py-0">
        <div class="flex items-center justify-between">
          <div class="text-sm">
            <div>
              <span class="font-mono"><%= phone&.international_pretty || "â€”" %></span>
              <% if phone.is_primary %><span class="badge badge-primary badge-sm badge-soft ml-2 align-middle">Primary</span><% end %>
              <% if phone.consent_sms %><span class="badge badge-ghost badge-sm ml-2 align-middle">SMS</span><% end %>
            </div>
            <div class="opacity-70"><%= phone.phone_type_code %></div>
          </div>

          <div class="flex gap-1">
            <%= button_to "Primary",
              primary_party_party_phone_path(party.public_id, phone),
              method: :patch,
              form: { data: { turbo_frame: dom_id(party, :phones_section) } },
              class: "btn btn-ghost btn-xs" %>

            <%= link_to "Edit",
              edit_party_party_phone_path(party.public_id, phone, from: :show),
              data: { turbo_frame: "comm_modal_frame", action: "click->modal#open" },
              class: "btn btn-ghost btn-xs" %>

            <%= button_to "Delete",
              party_party_phone_path(party.public_id, phone),
              method: :delete,
              form: { data: { turbo_confirm: "Delete this phone?" } },
              class: "btn btn-ghost btn-xs text-error" %>
          </div>
        </div>
      </li>
    <% end %>
  </ul>
</section>
